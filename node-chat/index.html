<!doctype html>
<html>
  <head>
    <title>My chat</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 14px Helvetica, Arial; }
      #greeting {position: fixed; display: inline; left: 2%; top: 8%}
      #nickname-form { padding: 3px; position: fixed; left:0; top: 0; width: 35%; }
      #team-name { padding: 3px; position: fixed; right:10px; top: 0; font:40px Brush Script MT,cursive; }
      #nickname { border: 2; padding: 10px; width: 70%; margin-right: 1%; }
      #select { width: 28%; background: rgb(210, 174, 212); border: none; padding: 10px; font: 10px; font-family: Consolas,monaco,monospace; }
      #chat-form { background: #000; padding: 3px; position: fixed; bottom: 0; width: 100%; }
      #message { border: 0; padding: 10px; width: 90%; margin-right: .5%; }
      #send { width: 9%; background: rgb(210, 174, 212); border: none; padding: 10px; font-family: Consolas,monaco,monospace; }
      #messages { position: fixed; top: 15%; width:100%; list-style-type: none; margin: 0; padding: 0; }
      #messages li { padding: 5px 10px; }
      #messages li:nth-child(odd) { background: rgb(210, 174, 212); }
    </style>
  </head>
  <body>
    <div id="team-name">Team Luna Chat</div>
    <form action="" id="nickname-form">
      <input id="nickname" autocomplete="off" /><button id="select">Nickname</button>
    </form>
    <div id="greeting"></div>
    <form action="" id="chat-form">
      <input id="message" autocomplete="off" /><button id="send">Send</button>
    </form>
    <ul id="messages"></ul>
  </body>
  <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
  <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>

const CSS_COLOR_NAMES = [
  "AliceBlue", "AntiqueWhite", "Aqua", "Aquamarine", "Azure", "Beige",
  "Bisque", "Black", "BlanchedAlmond", "Blue", "BlueViolet", "Brown",
  "BurlyWood", "CadetBlue", "Chartreuse", "Chocolate", "Coral",
  "CornflowerBlue", "Cornsilk", "Crimson", "Cyan", "DarkBlue","DarkCyan", "DarkGoldenRod",
  "DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen",
  "DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue",
  "DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue",
  "DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia",
  "Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow",
  "HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush",
  "LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow",
  "LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen",
  "LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime",
  "LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid",
  "MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise",
  "MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy",
  "OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod",
  "PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum",
  "PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown",
  "Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue",
  "SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle",
  "Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen",
];

    // load socket.io-client
    var socket = io();
    
    // on nick form submit, save nickname
    $('#nickname-form').submit(function(){
      // save nick in session & greet
      sessionStorage.setItem("nickname", $('#nickname').val());

      var randomColor = CSS_COLOR_NAMES[Math.floor(Math.random()*CSS_COLOR_NAMES.length)];
      sessionStorage.setItem("color", randomColor);
    
      // greet user
      $("#greeting").html('Welcome' + ' ' + $('#nickname').val() + '!');
      $('#nick').val('');
      return false;
    });

    // on chat form submit, send msg to server
    $('#chat-form').submit(function(){
      
      // get nickname and color from session storage
      var nick = sessionStorage.getItem("nickname");
      var color = sessionStorage.getItem("color");

      // Get the Current Date
      var date = new Date();
      var stringdate = date.toDateString();

      // append and emit message
      $('#messages').append($("<li style='color:"+color+"; font-weight:bold;'>").text(nick + ': ' + $('#message').val()));
      // Helena - Changed the Message so it would include the Current Date
      $('#messages').append($("<li style='color:"+color+"'>").text('Date: ' + stringdate));
      socket.emit('message', nick + ': ' + $('#message').val());
      $('#message').val('');
      
      return false;
    });
    
    // on msg received, append to list
    socket.on('message', function(msg){
    $('#messages').append($('<li>').text(msg));

    });
  </script>
